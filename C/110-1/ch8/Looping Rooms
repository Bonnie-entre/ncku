#include<stdio.h>

int main () {
    int k, count=0;
    
    scanf("%d", &k);
    int a[k], pass[k];
    
    for (int i=0; i<k; i++){
    	scanf("%d", &a[i]);
      pass[i]=0;
    }
    
    for (int i=0; i<k; i++){
        //printf("%d %d\n------------", i, pass[i]);
        if (pass[i]<1) {
          int shift=a[i];
          while(i!=shift){
            //printf("%d %d ", i, shift);
            pass[shift]++;
            shift = a[shift];
            }
          count++; 
        }
        pass[i]++;
    }
    printf("%d rings\n", count);

    for (int i=0; i<k; i++){
      if(pass[i]==1){
        printf("%d", i);
        int shift=a[i];
        while(i!=shift){
          printf(" -> %d", shift);
          shift = a[shift];  
        }
        printf(" -> %d\n", i);
      }
    }
    return 0;
}


